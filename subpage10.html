<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cookiebot CMP Test ‚Äì PDanielsen's GitHub Site</title>
  <style>
    :root {
      --bg: #0d1117;
      --surface: #161b22;
      --surface2: #21262d;
      --accent: #58a6ff;
      --accent2: #1f6feb;
      --text: #e6edf3;
      --muted: #8b949e;
      --border: #30363d;
      --green: #3fb950;
      --red: #f85149;
      --yellow: #d29922;
      --purple: #a371f7;
      --radius: 12px;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }

    /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
    header {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 0 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 60px;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .logo {
      font-size: 1rem;
      font-weight: 700;
      color: var(--accent);
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
    }
    .logo svg { width: 28px; height: 28px; fill: var(--accent); }
    nav { display: flex; gap: 4px; flex-wrap: wrap; align-items: center; }
    nav a {
      color: var(--muted);
      text-decoration: none;
      font-size: 0.8rem;
      padding: 5px 10px;
      border-radius: 6px;
      transition: background .2s, color .2s;
    }
    nav a:hover { background: var(--surface2); color: var(--text); }
    .nav-dropdown { position: relative; }
    .nav-dropbtn {
      color: var(--muted);
      font-size: 0.8rem;
      padding: 5px 10px;
      border-radius: 6px;
      cursor: pointer;
      user-select: none;
      transition: background .2s, color .2s;
    }
    .nav-dropbtn:hover { background: var(--surface2); color: var(--text); }
    .nav-dropdown-content {
      display: none;
      position: absolute;
      top: calc(100% + 6px);
      left: 0;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      min-width: 140px;
      overflow: hidden;
      box-shadow: 0 8px 24px rgba(0,0,0,.4);
      z-index: 200;
    }
    .nav-dropdown:hover .nav-dropdown-content { display: block; }
    .nav-dropdown-content a { display: block; padding: 8px 14px; border-radius: 0; font-size: 0.82rem; }
    .nav-dropdown-content a:hover { background: var(--surface2); }
    .dropdown-divider { height: 1px; background: var(--border); margin: 4px 0; }

    /* ‚îÄ‚îÄ PAGE WRAP ‚îÄ‚îÄ */
    .page-wrap {
      max-width: 900px;
      margin: 0 auto;
      padding: 48px 40px 80px;
    }
    .breadcrumb {
      font-size: 0.8rem;
      color: var(--muted);
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .breadcrumb a { color: var(--accent); text-decoration: none; }
    .breadcrumb a:hover { text-decoration: underline; }
    .breadcrumb span { color: var(--border); }

    /* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
    .page-hero { margin-bottom: 36px; }
    .page-hero h1 {
      font-size: 2rem;
      font-weight: 800;
      background: linear-gradient(135deg, var(--accent), var(--purple));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 10px;
    }
    .page-hero p { color: var(--muted); font-size: 1rem; line-height: 1.6; max-width: 580px; }

    /* ‚îÄ‚îÄ CMP INFO BANNER ‚îÄ‚îÄ */
    .cmp-banner {
      background: var(--surface);
      border: 1px solid var(--border);
      border-left: 4px solid var(--purple);
      border-radius: var(--radius);
      padding: 20px 24px;
      margin-bottom: 32px;
      display: flex;
      gap: 18px;
      align-items: flex-start;
    }
    .cmp-banner .icon { font-size: 1.8rem; flex-shrink: 0; margin-top: 2px; }
    .cmp-banner h3 { font-size: 0.95rem; font-weight: 700; margin-bottom: 6px; }
    .cmp-banner p { font-size: 0.85rem; color: var(--muted); line-height: 1.6; }

    /* config chips */
    .config-chips { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 14px; }
    .chip {
      font-size: 0.75rem;
      padding: 4px 10px;
      border-radius: 20px;
      border: 1px solid var(--border);
      background: var(--surface2);
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .chip .chip-label { color: var(--text); font-weight: 600; }
    .chip.highlight { border-color: var(--purple); color: var(--purple); background: rgba(163,113,247,.08); }

    /* ‚îÄ‚îÄ SECTION HEADER ‚îÄ‚îÄ */
    .section-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border);
    }
    .section-header h2 { font-size: 1.1rem; font-weight: 700; }
    .section-header .badge {
      background: var(--surface2);
      border: 1px solid var(--border);
      color: var(--muted);
      font-size: 0.72rem;
      padding: 2px 8px;
      border-radius: 20px;
    }
    .section-header .badge.blocked {
      border-color: #5a2020;
      background: #2d1010;
      color: var(--red);
    }

    /* ‚îÄ‚îÄ MEDIA GRID ‚îÄ‚îÄ */
    .media-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }
    .media-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      transition: border-color .2s, transform .2s;
    }
    .media-card:hover { border-color: var(--accent2); transform: translateY(-2px); }
    .media-card-header {
      padding: 14px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid var(--border);
    }
    .media-card-header .title { font-size: 0.9rem; font-weight: 600; display: flex; align-items: center; gap: 8px; }
    .media-card-header .service-tag {
      font-size: 0.72rem;
      color: var(--muted);
      background: var(--surface2);
      padding: 2px 8px;
      border-radius: 20px;
    }
    .media-card-body { padding: 16px; background: #0d1117; }
    .media-card-body iframe { width: 100%; border: none; border-radius: 8px; display: block; }

    /* blocked card state */
    .media-card.is-blocked { border-color: #3a1f1f; }
    .media-card.is-blocked .media-card-header { border-bottom-color: #3a1f1f; }
    .blocked-body {
      padding: 28px 20px;
      text-align: center;
    }
    .blocked-body .b-icon { font-size: 2rem; margin-bottom: 10px; }
    .blocked-body .b-title { font-size: 0.9rem; font-weight: 700; margin-bottom: 6px; color: var(--text); }
    .blocked-body .b-desc { font-size: 0.8rem; color: var(--muted); line-height: 1.5; }
    .blocked-tag {
      display: inline-block;
      margin-top: 12px;
      background: #2d1010;
      color: var(--red);
      border: 1px solid #5a2020;
      font-size: 0.72rem;
      padding: 3px 10px;
      border-radius: 20px;
    }
    .blocked-tag.geo {
      background: #1a1a2e;
      color: #79b8ff;
      border-color: #1f3a5f;
    }

    /* status row */
    .status-row {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 10px;
      margin-bottom: 40px;
    }
    .status-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 14px 16px;
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 0.85rem;
    }
    .dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
    .dot.green  { background: var(--green);  box-shadow: 0 0 6px var(--green); }
    .dot.red    { background: var(--red);    box-shadow: 0 0 6px var(--red); }
    .dot.yellow { background: var(--yellow); box-shadow: 0 0 6px var(--yellow); }
    .dot.purple { background: var(--purple); box-shadow: 0 0 6px var(--purple); }
    .status-card .s-name { font-weight: 600; }
    .status-card .s-hint { font-size: 0.75rem; color: var(--muted); }

    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--accent);
      text-decoration: none;
      font-size: 0.88rem;
      padding: 8px 14px;
      border: 1px solid var(--border);
      border-radius: 8px;
      transition: background .2s, border-color .2s;
    }
    .back-link:hover { background: var(--surface); border-color: var(--accent2); }

    /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
    footer {
      background: var(--surface);
      border-top: 1px solid var(--border);
      text-align: center;
      padding: 24px;
      font-size: 0.82rem;
      color: var(--muted);
    }

    @media (max-width: 640px) {
      header { padding: 14px 16px; flex-direction: column; height: auto; gap: 10px; }
      .page-wrap { padding: 32px 16px 60px; }
      .media-grid { grid-template-columns: 1fr; }
    }
  </style>

  <!-- Cookiebot CMP -->
  <script id="Cookiebot"
    src="https://consent.cookiebot.com/uc.js"
    data-cbid="7423fb41-cb50-41dc-882a-924ce9610bf8"
    data-blockingmode="auto"
    type="text/javascript"
    data-georegions="{'region':'DE, DK','cbid':'93787bb5-5769-45c5-a6e9-f7a2c7525056'}">
  </script>

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5TFL5GG5');</script>
</head>
<body>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5TFL5GG5"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<!-- ‚ïê‚ïê HEADER ‚ïê‚ïê -->
<header>
  <a class="logo" href="index.html">
    <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
      <path d="M8 0C3.58 0 0 3.58 0 8a8 8 0 005.47 7.59c.4.07.55-.17.55-.38
        0-.19-.01-.82-.01-1.49C4 14.52 3.48 13.36 3.32 12.75c-.1-.26-.52-1.07-.89-1.28
        -.3-.17-.74-.59-.01-.6.68-.01 1.17.63 1.33.89.78 1.31 2.02.94 2.52.72
        .08-.56.3-.94.55-1.16-1.93-.22-3.95-.96-3.95-4.27 0-.94.34-1.71.89-2.31
        -.09-.22-.39-1.09.08-2.28 0 0 .73-.23 2.38.89a8.3 8.3 0 012.17-.29
        c.73 0 1.47.1 2.17.29 1.65-1.13 2.38-.89 2.38-.89.47 1.19.17 2.06.08 2.28
        .56.6.89 1.37.89 2.31 0 3.32-2.03 4.05-3.96 4.27.31.27.59.8.59 1.62
        0 1.17-.01 2.11-.01 2.4 0 .21.15.46.55.38A8 8 0 0016 8c0-4.42-3.58-8-8-8z"/>
    </svg>
    PDanielsen
  </a>
  <nav>
    <a href="index.html">Home</a>
    <div class="nav-dropdown">
      <span class="nav-dropbtn">Subpages ‚ñæ</span>
      <div class="nav-dropdown-content">
        <a href="subpage.html">Subpage</a>
        <div class="dropdown-divider"></div>
        <a href="subpage1.html">Subpage 1</a>
        <a href="subpage2.html">Subpage 2</a>
        <a href="subpage3.html">Subpage 3</a>
        <a href="subpage4.html">Subpage 4</a>
        <a href="subpage5.html">Subpage 5</a>
        <a href="subpage6.html">Subpage 6</a>
        <a href="subpage7.html">Subpage 7</a>
        <a href="subpage8.html">Subpage 8</a>
        <a href="subpage9.html">Subpage 9</a>
        <a href="subpage10.html">Subpage 10</a>
      </div>
    </div>
    <a href="trackerdecldefault.html">Tracker Default</a>
    <a href="trackerdeclmatrix.html">Tracker Matrix</a>
    <a href="trackerdeclcontainer.html">Tracker Container</a>
    <a href="analytics.html">Analytics</a>
  </nav>
</header>

<!-- ‚ïê‚ïê CONTENT ‚ïê‚ïê -->
<div class="page-wrap">

  <div class="breadcrumb">
    <a href="index.html">Home</a>
    <span>‚Ä∫</span>
    <span>Cookiebot CMP Test</span>
  </div>

  <div class="page-hero">
    <h1>Cookiebot CMP Test</h1>
    <p>This page is used to test <strong style="color:var(--text)">Cookiebot</strong> as a Consent Management Platform. Embeds below are intentionally blocked or allowed based on user consent and geo-region rules configured in the Cookiebot dashboard.</p>
  </div>

  <!-- CMP config info -->
  <div class="cmp-banner">
    <div class="icon">üç™</div>
    <div>
      <h3>Cookiebot Configuration</h3>
      <p>Auto-blocking mode is active. A separate consent ID (CBID) is applied for visitors from <strong style="color:var(--text)">Germany (DE)</strong> and <strong style="color:var(--text)">Denmark (DK)</strong> via geo-region rules. All other regions use the default CBID.</p>
      <div class="config-chips">
        <div class="chip highlight">üåç Geo rule: DE + DK</div>
        <div class="chip"><span class="chip-label">Mode:</span> auto-blocking</div>
        <div class="chip"><span class="chip-label">Default CBID:</span> 7423fb41‚Ä¶</div>
        <div class="chip"><span class="chip-label">DE/DK CBID:</span> 93787bb5‚Ä¶</div>
        <div class="chip"><span class="chip-label">GTM:</span> GTM-5TFL5GG5</div>
      </div>
    </div>
  </div>

  <!-- Live status -->
  <div class="section-header">
    <h2>Live Status</h2>
    <span class="badge" id="statusBadge">checking‚Ä¶</span>
  </div>

  <div class="status-row" id="statusRow">
    <!-- populated by JS -->
  </div>

  <!-- Embeds -->
  <div class="section-header">
    <h2>Test Embeds</h2>
    <span class="badge">2 services</span>
  </div>

  <div class="media-grid">

    <!-- YouTube (commented out in original ‚Äî shown as blocked) -->
    <div class="media-card is-blocked">
      <div class="media-card-header">
        <span class="title">‚ñ∂ YouTube</span>
        <span class="service-tag">youtube.com</span>
      </div>
      <div class="media-card-body">
        <div class="blocked-body">
          <div class="b-icon">üö´</div>
          <div class="b-title">Embed currently disabled</div>
          <div class="b-desc">This YouTube embed is commented out in the source. Re-enable it to test whether Cookiebot's auto-blocking intercepts it before consent is given.</div>
          <span class="blocked-tag">Commented out in source</span>
        </div>
        <!-- Uncomment to test Cookiebot blocking:
        <iframe height="215"
          src="https://www.youtube.com/embed/dQw4w9WgXcQ"
          title="YouTube video player"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen></iframe>
        -->
      </div>
    </div>

    <!-- Facebook (SDK commented out ‚Äî shown as blocked) -->
    <div class="media-card is-blocked">
      <div class="media-card-header">
        <span class="title">üëç Facebook Page</span>
        <span class="service-tag">facebook.com</span>
      </div>
      <div class="media-card-body">
        <div class="blocked-body">
          <div class="b-icon">üö´</div>
          <div class="b-title">SDK currently disabled</div>
          <div class="b-desc">The Facebook SDK script is commented out. Re-enable it to test whether Cookiebot blocks it for visitors who have not consented to marketing cookies.</div>
          <span class="blocked-tag">Commented out in source</span>
        </div>
        <!-- Uncomment to test Cookiebot blocking:
        <div id="fb-root"></div>
        <script async defer crossorigin="anonymous"
          src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v12.0"
          nonce="XYZ123"></script>
        <div class="fb-page"
          data-href="https://www.facebook.com/facebook"
          data-tabs="timeline" data-width="" data-height="300"
          data-small-header="false" data-adapt-container-width="true"
          data-hide-cover="false" data-show-facepile="true">
        </div>
        -->
      </div>
    </div>

  </div>

  <a class="back-link" href="index.html">‚Üê Back to Home</a>

</div>

<!-- ‚ïê‚ïê FOOTER ‚ïê‚ïê -->
<footer>
  &copy; 2025 PDanielsen ¬∑ GitHub Test Lab ¬∑ Cookiebot CMP Test Page
</footer>

<!-- ‚ïê‚ïê STATUS SCRIPT ‚ïê‚ïê -->
<script>
  const checks = [
    { name: "Cookiebot",     hint: "CMP loaded",       dot: "purple", test: () => typeof window.Cookiebot !== 'undefined' },
    { name: "GTM",           hint: "Tag manager",      dot: "green",  test: () => typeof window.google_tag_manager !== 'undefined' },
    { name: "Consent given", hint: "Any category",     dot: "yellow", test: () => typeof window.Cookiebot !== 'undefined' && window.Cookiebot.consented === true },
    { name: "Geo rule",      hint: "DE / DK region",   dot: "purple", test: () => false }, // server-side only
  ];

  function render() {
    const row = document.getElementById('statusRow');
    const badge = document.getElementById('statusBadge');
    let loaded = 0;
    row.innerHTML = checks.map(c => {
      let ok; try { ok = c.test(); } catch(e) { ok = false; }
      if (ok) loaded++;
      return `<div class="status-card">
        <div class="dot ${ok ? c.dot : 'red'}"></div>
        <div><div class="s-name">${c.name}</div><div class="s-hint">${ok ? c.hint : 'Not detected'}</div></div>
      </div>`;
    }).join('');
    badge.textContent = `${loaded}/${checks.length} active`;
  }

  render();
  window.addEventListener('load', () => setTimeout(render, 1500));
</script>

</body>
</html>
